<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qsxh.dao.HabitDao">
    <!--查询兴趣爱好选项-->
    <select id="findAllByHabit" resultType="com.qsxh.entity.HabitData">
        select t.tyid,t.tyname,h.hid,h.hname from tblhabittype t, tblhitem h
        where t.tyid = h.tyid order by h.hid asc;
    </select>
    <!--查询用户兴趣爱好-->
    <select id="findAllByUser" resultType="com.qsxh.entity.HabitData">
        select t.tyid,t.tyname,i.hid,i.hname
        from tblhabit h,tblhitem i,tblhabittype t
        where h.hid = i.hid and i.tyid = t.tyid and h.userid = #{userid};
    </select>
    <!--批量插入兴趣爱好-->
    <insert id ="insertHabitByUser">
        insert into tblhabit (userid,hid) values
        <foreach collection ="list" item="HabitData" index= "index" separator =",">
            (
            #{userid}, #{HabitData}
            )
        </foreach>
    </insert>
    <!--删除用户兴趣爱好-->
    <delete id="deleteHabitByUser">
        delete from tblhabit where userid = #{userid}
    </delete>
    <!--添加照片 -->
    <insert id="insertPhotoByUser" parameterType="com.qsxh.entity.ImageReturn">
        insert into tblphoto (userid,purl)values
        (
            #{userid},#{imgurl}
        )
    </insert>
    <!--查询照片-->
    <select id="findPhotoByUser" resultType="com.qsxh.entity.ImageReturn">
        select photoid,userid,purl as imgurl from tblphoto where userid = #{userid}
    </select>
    <!--删除照片-->
    <delete id="deleteMyPhoto">
        delete from tblphoto where photoid = #{photoid}
    </delete>
</mapper>